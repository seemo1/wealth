<div ng-controller="ConcentrationController as concentration">
    <div class="panel panel-default">
        <div class="panel-heading clearfix">
        <h4 class="panel-title pull-left">&nbsp;&nbsp;Concentration</h4>
        <a class="glyphicon link-no-style pull-right"
           style="font-size:20px;"
           ng-class="concentration.showAddMajor ? 'glyphicon-remove-circle' : 'glyphicon-plus-sign'"
           ng-click="concentration.showAddMajorForm()"></a>
        </div>
    </div>
    <div class="panel-body">
        <div ng-hide="concentration.showAddMajor">
            <div class="row">
                <div class="col-xs-12 col-md-12 text-left">
                    <select ng-selected="0" ng-model="selectDept" ng-options="m.category for m in depts">Category</select>
                    <button class="btn btn-success" ng-click="query()">Query</button>
                </div>
            </div>
            <br>
            <div class="table-responsive">
                <table st-table="rowCollection" class="table table-striped">
                    <tr>
                        <td><span class="glyphicon glyphicon-menu-hamburger"></span></td>
                        <td class="table-small-row">ID</td>
                        <td class="table-medium-row">Group</td>
                        <td class="table-medium-row">Name(EN)</td>
                        <td class="table-medium-row">Short Name(EN)</td>
                        <td class="table-medium-row">Name(CN)</td>
                        <td class="table-medium-row">PinYin(CN)</td>
                        <td class="table-medium-row">Name(TW)</td>
                        <td class="table-small-row">Hide</td>
                        <td class="table-small-row">Count</td>
                        <td class="table-medium-row">Last Update Time</td>
                        <td class="table-medium-row">Publish Time</td>
                    </tr>
                    <tr ng-repeat="row in conList">
                        <td>
                            <a class="glyphicon glyphicon-pencil" aria-hidden="true"
                               tooltip-placement="top" tooltip="Click to edit"
                               ng-click="edit(row)" href="#"></a><br>
                            <a style="color:red" class="glyphicon glyphicon-trash" aria-hidden="true"
                               tooltip-placement="bottom" tooltip="Click to delete"
                               ng-click="delete(row.concentration_key)" href="#"></a>
                        </td>
                        <td class="table-small-row">{{row.concentration_group}}</td>
                        <td class="table-small-row">{{row.concentration_key}}</td>
                        <td class="table-medium-row">{{row.en_name}}</td>
                        <td class="table-medium-row">{{row.en_short}}</td>
                        <td class="table-medium-row">{{row.sc_name}}</td>
                        <td class="table-medium-row">{{row.sc_pinyin}}</td>
                        <td class="table-medium-row">{{row.tc_name}}</td>
                        <td class="table-small-row">{{row.is_del}}</td>
                        <td class="table-small-row">{{row.people_count}}</td>
                        <td class="table-medium-row">{{row.publish_time}}</td>
                        <td class="table-medium-row">{{row.last_update_time}}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div ng-show="concentration.showAddMajor">
            <form name="concentration.formAddNewMajor" ng-submit="concentration.saveNewMajor()" novalidate>
                <div class="input-group input-group-sm"
                     ng-class="concentration.formAddNewMajor.concentration_key.$invalid ? 'has-error':'has-success'">
                    <label for="concentration_key">Concentration Key</label>
                    <input type="text" id="concentration_key" name='concentration_key' class="form-control" ng-model="concentration.newMajor.concentration_key"
                           placeholder="Concentration Key" required>
                </div>
                <div class="input-group input-group-sm"
                     ng-class="concentration.formAddNewMajor.en_name.$invalid ? 'has-error':'has-success'">
                    <label for="concentration_group">Concentration Group</label>
                    <input type="text" id="concentration_group" name='concentration_group' class="form-control" ng-model="concentration.newMajor.concentration_group"
                           placeholder="Concentration Group">
                </div>
                <div class="input-group input-group-sm"
                     ng-class="concentration.formAddNewMajor.en_name.$invalid ? 'has-error':'has-success'">
                    <label for="en_name">English Name</label>
                    <input type="text" id="en_name" name='en_name' class="form-control" ng-model="concentration.newMajor.en_name"
                           placeholder="English Name" required>
                </div>
                <div class="input-group input-group-sm"
                     ng-class="concentration.formAddNewMajor.en_short.$invalid ? 'has-error':'has-success'">
                    <label for="en_short">English Name Short</label>
                    <input type="text" id="en_short" name='en_short' class="form-control" ng-model="concentration.newMajor.en_short"
                           placeholder="English Name Short" required>
                </div>
                <div class="input-group input-group-sm"
                     ng-class="concentration.formAddNewMajor.sc_name.$invalid ? 'has-error':'has-success'">
                    <label for="sc_name">Simplified Chinese Name</label>
                    <input type="text" id="sc_name" name='sc_name' class="form-control"
                           ng-model="concentration.newMajor.sc_name" placeholder="簡體名稱" required>
                </div>
                <div class="input-group input-group-sm"
                     ng-class="concentration.formAddNewMajor.sc_pinyin.$invalid ? 'has-error':'has-success'">
                    <label for="sc_pinyin">Simplified Pinyin</label>
                    <input type="text" id="sc_pinyin" name='sc_pinyin' class="form-control"
                           ng-model="concentration.newMajor.sc_pinyin" placeholder="簡體拼音" required>
                </div>
                <div class="input-group input-group-sm">
                    <label for="tc_name">Traditional Chinese Name</label>
                    <input type="text" id="tc_name" name='tc_name' class="form-control"
                           ng-model="concentration.newMajor.tc_name" placeholder="繁體名稱">
                </div>
                <div class="input-group input-group-sm"
                     ng-class="concentration.formAddNewMajor.region.$invalid ? 'has-error':'has-success'">
                    <label for="region">Region</label>
                    <input type="text" id='region' name='region' class="form-control"
                           ng-model="concentration.newMajor.region" placeholder="Region" required>
                </div>
                <div class="input-group">
                    <label for="is_del">Delete&nbsp;&nbsp;&nbsp;</label>
                    <input type="checkbox"
                           id="is_del" name="display"
                           ng-model="concentration.newMajor.is_del"
                           ng-true-value="1" ng-false-value="0">
                </div>
                <br>

                <div class="alert alert-danger" ng-show="concentration.error">{{concentration.error}}</div>
                <div ng-show='concentration.addSucceed' class="alert alert-success alert-dismissable" role="alert">
                    <a class="link-no-style" ng-click="school.showAddSchoolForm()"><strong>New Concentration
                        added!!</strong></a>
                </div>
                <button class="btn btn-success btn-block"
                        ng-disabled="concentration.formAddNewMajor.$invalid || concentration.uploading">
                    Create new Concentration
                </button>
                <a class="btn btn-danger btn-block" ng-click="concentration.showAddMajorForm()">Close</a>
            </form>
        </div>
    </div>
</div>

<!-- Modal edit -->
<script type="text/ng-template" id="edit-concentration.html">
    <div class="modal-header">
        <h3 class="modal-title">Edit {{concentration_key}}</h3>
    </div>
    <div class="modal-body">
        <form name="editConcentration.formeditCon" novalidate>
            <div class="input-group input-group-sm"
                 ng-class="editConcentration.formeditCon.enname.$invalid ? 'has-error':'has-success'">
                <label for="editenname">Name(EN)</label>
                <input type="text" id='editenname' name='enname' class="form-control" ng-model="record.en_name">

            </div>
            <div class="input-group input-group-sm"
                 ng-class="editConcentration.formeditCon.short.$invalid ? 'has-error':'has-success'">
                <label for="editshort">Short Name(EN)</label>
                <input type="text" id='editshort' name='short' class="form-control" ng-model="record.en_short">
            </div>
            <div class="input-group input-group-sm"
                 ng-class="editConcentration.formeditCon.scname.$invalid ? 'has-error':'has-success'">
                <label for="editscname">Name(CN)</label>
                <input type="text" id='editscname' name='scname' class="form-control" ng-model="record.sc_name">
            </div>
            <div class="input-group input-group-sm"
                 ng-class="editConcentration.formeditCon.pinyin.$invalid ? 'has-error':'has-success'">
                <label for="editpinyin">PinYin(CN)</label>
                <input type="text" id='editpinyin' name='pinyin' class="form-control" ng-model="record.sc_pinyin">
            </div>
            <div class="input-group input-group-sm"
                 ng-class="editConcentration.formeditCon.twname.$invalid ? 'has-error':'has-success'">
                <label for="edittwname">Name(TW)</label>
                <input type="text" id='edittwname' name='twname' class="form-control" ng-model="record.tc_name">
            </div>
            <div class="input-group input-group-sm"
                 ng-class="editConcentration.formeditCon.hide.$invalid ? 'has-error':'has-success'">
                <label for="edithide">Hide(0:No, 1:Yes)</label>
                <input type="text" id='edithide' name='hide' class="form-control" ng-model="record.is_del">
            </div>
            <div class="input-group input-group-sm"
                 ng-class="editConcentration.formeditCon.count.$invalid ? 'has-error':'has-success'">
                <label for="editcount">Count</label>
                <input type="text" id='editcount' name='count' class="form-control" ng-model="record.people_count">
            </div>
        </form>
        <div class="alert alert-danger" ng-show="editConcentration.error">Cannot update. Please try again or contact Seemo xP</div>
        <div class="alert alert-success" ng-show="editConcentration.editSucceed">Link updated!</div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary btn-block" ng-click="save()" ng-disabled="updating">Save</button>
        <a class="btn btn-danger btn-block" ng-click="cancel()">Close</a>
    </div>
</script>


