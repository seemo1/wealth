<!DOCTYPE html>
<html ng-app="fdt.mobile.contest">
<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1, minimal-ui" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- for ios 7 style, multi-resolution icon of 152x152 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
    <!-- for Chrome on Android, multi-resolution icon of 196x196 -->
    <meta name="mobile-web-app-capable" content="yes">
    <script>
        window.market = "{{market}}";
        window.language = "{{language}}";
        window.availableMarkets = "{{availableMarkets}}";
        window.userIdentity = "{{userIdentity}}";
        window.appProtocol = "{{protocol}}";
        if(!window.market) {window.market = 'global';}
        if(!window.language) {window.language = 'en';}
        if(!window.userIdentity) {window.userIdentity = 'guest';}
        if(!window.appProtocol) {window.appProtocol = 'forexmaster';}
    </script>
    <link rel="stylesheet" href="{{cssSrc}}" type="text/css" />
    <title>{{title}}</title>
<script src="contest-bundle.js"></script></head>
<body ng-cloak>
<div class="ui-view-container">
    <div ng-show='stateIsLoading' class="h-v row-col">
        <div class="row-cell v-m text-center">
            <div class="m-b">
                <div class="m-t-md font-bold">
                    <img src="/mobile/contest/styles/img/loading_{{market}}.gif" class="loading-img" />
                </div>
            </div>
        </div>
    </div>
</div>
<div ui-view autoscroll="true" ng-show='!stateIsLoading' ></div>
</body>
</html>
<script src="bower_components/Chart.js/Chart.min.js"></script>
<script src="js/fdt.min.js"></script>
<script>
//app use function list
function setToken(token) {
  if(!token)
    return false;
  localStorage.setItem('token', token);
  return true;
}

function requestToken(){
  top.location = window.appProtocol + "://fdt/request/getToken";
}

function onMyContest(error, protocol, platform, token, country, language) {
  if(setToken(token)){
    //hack to call angular control function....Orz.
    angular.element(document.getElementById("contest-main")).scope().contestCtrl.goContest();
  } else {
    alert("error:" + error +", protocol:" + protocol + ", token:" + token + ", country:" + country + ", language:" +language);
  }
}
</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-64117758-1', 'auto');
ga('send', 'pageview');
</script>